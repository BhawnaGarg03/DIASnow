<?xml version="1.0" encoding="UTF-8"?><record_update table="sys_script_include">
    <sys_script_include action="INSERT_OR_UPDATE">
        <access>package_private</access>
        <active>true</active>
        <api_name>sn_ind_tmt_orm.ProductOrderProcessor</api_name>
        <caller_access/>
        <client_callable>false</client_callable>
        <description>Customers can override methods in ProductOrderExtensionOOB in this file</description>
        <name>ProductOrderProcessor</name>
        <script><![CDATA[var ProductOrderProcessor = Class.create();
ProductOrderProcessor.prototype = Object.extendsObject(ProductOrderExtensionOOB, {
    // Define overriding functions here
  transformProductCharacteristics: function(characteristicArray, orderLineItemGr) {
        return this.getProductCharacteristics(orderLineItemGr);
    },
 getProductCharacteristics: function(orderLineItemGr) {
     var tmfCommonOrderAPIUtil = new TMFCommonOrderAPIUtil1();
        var characteristicArray = [];
        var characteristics = OrderCharacteristicValueDAO.queryAllBySpecification(orderLineItemGr, false);
        while (characteristics.next()) {
            var prdOfferingChar = this.queryAllByPOandChar(characteristics,orderLineItemGr);
            if (prdOfferingChar.next()) {
                var isPreviousValueDiff = true;
                if (orderLineItemGr.getValue('action') == TMFOrderAPIConstants.LINE_ITEM_ACTION.CHANGE)
                    if (characteristics.getValue("previous_characteristic_option_value") == charcteristics.getValue('characteristic_option_value'))
                        isPreviousValueDiff = false;

                if (isPreviousValueDiff) {
                    var characteristicObj = tmfCommonOrderAPIUtil.getCharacteristicArray(characteristics);
                    characteristicArray.push(characteristicObj);
                }
            }
        }
        return characteristicArray;
    },
	queryAllByPOandChar : function(charcteristics, customerOrderLineItem) {
    if (Object.keys(customerOrderLineItem).length === 0 || Object.keys(charcteristics).length === 0)
        return;

    var prdOfferingChar = new GlideRecord(Constants.TABLE_PRODUCT_OFFERING_CHAR);
    prdOfferingChar.addQuery('characteristic', charcteristics.getValue('characteristic'));
    prdOfferingChar.addQuery('product_offering', customerOrderLineItem.getValue('product_offering'));
    prdOfferingChar.addQuery('characteristic_option', charcteristics.getValue('characteristic_option'));
    prdOfferingChar.query();
    return prdOfferingChar;
},
    type: 'ProductOrderProcessor'
});]]></script>
        <sys_class_name>sys_script_include</sys_class_name>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2021-05-19 12:12:04</sys_created_on>
        <sys_id>9f8a6590c3903010fa5673ce3640dd2f</sys_id>
        <sys_mod_count>14</sys_mod_count>
        <sys_name>ProductOrderProcessor</sys_name>
        <sys_package display_value="Order Management for Telecom, Media &amp; Tech" source="sn_ind_tmt_orm">3c58f5d55b0310102dff5e92dc81c711</sys_package>
        <sys_policy/>
        <sys_scope display_value="Order Management for Telecom, Media &amp; Tech">3c58f5d55b0310102dff5e92dc81c711</sys_scope>
        <sys_update_name>sys_script_include_9f8a6590c3903010fa5673ce3640dd2f</sys_update_name>
        <sys_updated_by>AD12076</sys_updated_by>
        <sys_updated_on>2022-06-21 19:34:51</sys_updated_on>
    </sys_script_include>
    <sys_claim action="INSERT_OR_UPDATE">
        <claim_owner_scope display_value="Order Management for Telecom, Media &amp; Tech">3c58f5d55b0310102dff5e92dc81c711</claim_owner_scope>
        <claim_timestamp>182f470730f0000001</claim_timestamp>
        <metadata_update_name>sys_script_include_9f8a6590c3903010fa5673ce3640dd2f</metadata_update_name>
        <previous_claim_app_version>2.0.2</previous_claim_app_version>
        <previous_claim_name>Order Management for Telecom, Media &amp; Tech</previous_claim_name>
        <previous_claim_scope>3c58f5d55b0310102dff5e92dc81c711</previous_claim_scope>
        <sys_created_by>AD13956</sys_created_by>
        <sys_created_on>2022-08-31 15:06:26</sys_created_on>
        <sys_id>3834a5931b251d500f4ccbb8624bcbc6</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_updated_by>AD13956</sys_updated_by>
        <sys_updated_on>2022-08-31 15:06:26</sys_updated_on>
    </sys_claim>
</record_update>
